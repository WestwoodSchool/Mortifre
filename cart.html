<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Cart - Mortif√®re</title>
  <!-- Favicon: Winged M Logo -->
  <link rel="icon" type="image/png" href="winged-logo.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    rel="stylesheet"
  />
  <style>
    /* Header link underline effect */
    .nav-link {
      position: relative;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      width: 0;
      height: 1px;
      bottom: -2px;
      left: 0;
      background-color: #000;
      transition: width 0.3s;
    }
    .nav-link:hover::after {
      width: 100%;
    }

    .playfair { font-family: 'Playfair Display', serif; }
    .inter { font-family: 'Inter', sans-serif; }
  </style>
</head>
<body class="bg-[#121212] text-white">
  <!-- HEADER: soft translucent white, matching the others -->
  <nav class="fixed w-full z-50 bg-[#f5f5f5]/30 backdrop-blur-md">
    <div class="max-w-7xl mx-auto px-6 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-12">
          <a href="index.html">
            <img
              src="winged-logo.png"
              alt="Logo"
              class="h-12"
            />
          </a>
          <div class="hidden md:flex space-x-8">
            <a href="index.html" class="nav-link text-black inter hover:text-gray-700 transition-colors">Home</a>
          </div>
        </div>
        <!-- Cart icon leads here, but we're on cart page -->
        <div class="flex items-center space-x-6">
          <a href="cart.html" class="w-10 h-10 flex items-center justify-center text-black hover:text-gray-700 transition-colors">
            <i class="ri-shopping-bag-line text-xl"></i>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- CART CONTENT -->
  <div class="pt-24 pb-12 px-6">
    <div class="max-w-5xl mx-auto">
      <h1 class="text-3xl font-bold mb-8">Your Cart</h1>
      <div id="cart-container" class="space-y-6"></div>

      <!-- Subtotal/Shipping/Tax/Total -->
      <div id="cart-summary" class="bg-[#1a1a1a] p-4 mt-6 rounded-lg border border-white/10 hidden">
        <div class="flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0">
          <div class="space-y-2">
            <p id="subtotal-line" class="text-gray-300">Subtotal: $0</p>
            <p id="shipping-line" class="text-gray-300">Shipping: $0</p>
            <p id="tax-line" class="text-gray-300">Tax: $0</p>
          </div>
          <div>
            <p id="grandtotal-line" class="text-xl font-bold">Total: $0</p>
          </div>
        </div>
      </div>

      <!-- Cart Buttons -->
      <div class="mt-8 flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4">
        <!-- Clear Cart: white -->
        <button
          id="clear-cart"
          class="bg-white text-black px-6 py-3 rounded-button hover:bg-gray-200 transition-colors"
        >
          Clear Cart
        </button>
        <!-- Continue Shopping: white -->
        <a
          href="latestdrop.html"
          class="bg-white text-black px-6 py-3 rounded-button hover:bg-gray-200 transition-colors text-center"
        >
          Continue Shopping
        </a>
        <!-- Checkout: white, aligned to the right if on large screens -->
        <button
          id="checkout-btn"
          class="bg-white text-black px-6 py-3 rounded-button hover:bg-gray-200 transition-colors ml-auto md:ml-0"
        >
          Proceed to Checkout
        </button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const container = document.getElementById('cart-container');
      const clearBtn = document.getElementById('clear-cart');
      const checkoutBtn = document.getElementById('checkout-btn');
      const cartSummary = document.getElementById('cart-summary');
      const subtotalLine = document.getElementById('subtotal-line');
      const shippingLine = document.getElementById('shipping-line');
      const taxLine = document.getElementById('tax-line');
      const grandtotalLine = document.getElementById('grandtotal-line');

      // Load cart from localStorage
      let cart = localStorage.getItem('cart');
      cart = cart ? JSON.parse(cart) : [];

      function calculateTotals() {
        let subtotal = 0;
        cart.forEach(item => {
          subtotal += item.price * item.quantity;
        });
        // Example shipping & tax logic
        const shipping = subtotal > 0 ? 15 : 0; // $15 shipping if cart not empty
        const taxRate = 0.08; // 8% tax
        const tax = Math.round(subtotal * taxRate);
        const grandTotal = subtotal + shipping + tax;
        return { subtotal, shipping, tax, grandTotal };
      }

      function renderCart() {
        if (cart.length === 0) {
          container.innerHTML = '<p class="text-gray-400">Your cart is empty.</p>';
          cartSummary.classList.add('hidden');
          return;
        }
        cartSummary.classList.remove('hidden');

        // Build a table layout
        let html = `
          <div class="bg-[#1a1a1a] p-4 rounded-lg border border-white/10">
            <table class="w-full text-left">
              <thead>
                <tr class="border-b border-white/10">
                  <th class="py-3 text-gray-300">Item</th>
                  <th class="py-3 text-gray-300">Price</th>
                  <th class="py-3 text-gray-300">Quantity</th>
                  <th class="py-3 text-gray-300">Remove</th>
                </tr>
              </thead>
              <tbody>
        `;
        cart.forEach((item, index) => {
          const totalPrice = item.price * item.quantity;
          html += `
            <tr class="border-b border-white/5">
              <td class="py-3 flex items-center space-x-4">
                <img src="${item.img}" alt="${item.name}" class="w-16 h-16 object-cover rounded" />
                <span>${item.name}</span>
              </td>
              <td class="py-3">$${totalPrice}</td>
              <td class="py-3">
                <div class="flex items-center space-x-2">
                  <!-- Decrement: white button -->
                  <button data-index="${index}" data-action="decrement"
                    class="px-2 bg-white text-black rounded-button hover:bg-gray-200 transition-colors"
                  >-</button>
                  <span>${item.quantity}</span>
                  <!-- Increment: white button -->
                  <button data-index="${index}" data-action="increment"
                    class="px-2 bg-white text-black rounded-button hover:bg-gray-200 transition-colors"
                  >+</button>
                </div>
              </td>
              <td class="py-3">
                <!-- Remove: light gray -->
                <button data-index="${index}" data-action="remove"
                  class="px-4 py-1 bg-gray-300 text-black rounded-button hover:bg-gray-200 transition-colors"
                >X</button>
              </td>
            </tr>
          `;
        });
        html += `
              </tbody>
            </table>
          </div>
        `;
        container.innerHTML = html;

        // Attach events for +, -, remove
        container.querySelectorAll('button[data-action]').forEach(btn => {
          btn.addEventListener('click', function() {
            const idx = parseInt(this.dataset.index, 10);
            const action = this.dataset.action;
            if (action === 'increment') {
              cart[idx].quantity++;
            } else if (action === 'decrement') {
              if (cart[idx].quantity > 1) {
                cart[idx].quantity--;
              }
            } else if (action === 'remove') {
              cart.splice(idx, 1);
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
            renderSummary();
          });
        });
      }

      function renderSummary() {
        const { subtotal, shipping, tax, grandTotal } = calculateTotals();
        subtotalLine.textContent = `Subtotal: $${subtotal}`;
        shippingLine.textContent = `Shipping: $${shipping}`;
        taxLine.textContent = `Tax: $${tax}`;
        grandtotalLine.textContent = `Total: $${grandTotal}`;
      }

      renderCart();
      renderSummary();

      // Clear Cart
      clearBtn.addEventListener('click', function() {
        cart = [];
        localStorage.removeItem('cart');
        renderCart();
        renderSummary();
      });

      // Checkout
      checkoutBtn.addEventListener('click', function() {
        const { grandTotal } = calculateTotals();
        if (grandTotal === 0) {
          alert('Your cart is empty!');
          return;
        }
        // Replace with your own checkout flow:
        alert(`Proceeding to checkout. Total: $${grandTotal}`);
      });
    });
  </script>
</body>
</html>
